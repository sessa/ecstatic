angular.module("ecstatic.sockets").factory("socket",["ApiEndpoint","socketFactory","ConfigService","$location",function(e,t,c,o){return t({ioSocket:io.connect(o.absUrl().split("/")[0]+"//"+o.absUrl().split("/")[2])})}]).factory("socketManager",["$q","$rootScope","socket","$location",function(e,t,c,o){function n(){return i+=1,i>1e4&&(i=0),i}var a={},r={},i=0;return a.sendRequest=function(t){var o=e.defer(),a=n();return r[a]={time:new Date,cb:o},t.callback_id=a,c.emit(t.msg,t),o.promise},a.listener=function(e){var c=e;r.hasOwnProperty(c.callback_id)&&(t.$apply(r[c.callback_id].cb.resolve(c)),delete r[c.callbackID])},a}]);