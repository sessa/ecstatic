angular.module("ecstatic.player").controller("PlayerCtrl",["countdownEventService","$sce","$scope","userNumberEventService","updatePlayerstateEventService","$stateParams","playerServices","$state","$timeout","channelServices","ConfigService",function(e,n,t,r,c,o,i,a,l,s,u){function p(){var e=s.getChannel(o.channel_id),n=e.playlist.length;0!==n&&t.countdownFinished&&(i.setChannel(e),t.playerServices=i,t.showPlayer=!0)}r.listen(function(e,n){t.numberOfUsers=n}),e.listen(function(e){console.log("countdownFinished"),t.countdownFinished=!0,p()}),c.listen(function(e,n){console.log("updatePlayerstateEventService, playerstate="+JSON.stringify(n)),t.playerServices.playlist=n.playlist,p()}),t.addSongs=function(){a.go("app.channels-add")},t.playerServices=i,t.nextSong=function(){console.log("nextSong Action, $scope.playerServices.currentItem"+t.playerServices.currentItem),t.playerServices.onCompleteItem(),i.nextSongAction(t.playerServices.currentItem,o.channel_id)},t.$on("nextSong",function(e,n){t.playerServices.onCompleteItem(),t.playerServices.setItem(i.currentItem)}),t.$watch("dataReady",function(e){e&&p()})}]);