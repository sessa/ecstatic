angular.module("ecstatic.player").controller("PlayerCtrl",["countdownEventService","$sce","$scope","userNumberEventService","updatePlayerstateEventService","$stateParams","playerServices","$state","$timeout","channelServices","ConfigService",function(e,n,t,r,a,c,i,l,o,s,u){function p(){var e=s.getChannel(c.channel_id),n=e.playlist.length;0!==n&&t.countdownFinished&&(i.setChannel(e),t.playerServices=i,t.showPlayer=!0)}r.listen(function(e,n){t.numberOfUsers=n}),e.listen(function(e){t.countdownFinished=!0,p()}),a.listen(function(e,n){t.playerServices.playlist=n.playlist,p()}),t.addSongs=function(){l.go("app.channels-add")},t.playerServices=i,t.nextSong=function(){t.playerServices.onCompleteItem(),i.nextSongAction(t.playerServices.currentItem,c.channel_id)},t.$on("nextSong",function(e,n){t.playerServices.onCompleteItem(),t.playerServices.setItem(i.currentItem)}),t.$watch("dataReady",function(e){e&&p()})}]);