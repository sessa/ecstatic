angular.module("ecstatic.countdown").controller("CountdownCtrl",["countdownEventService","$scope","channelServices","$stateParams","$state","$rootScope",function(n,t,e,a,o,c){function i(){var i=e.getChannel(a.channel_id),r=(new Date).getTime();t.startTime=parseInt((i.start_time-r)/1e3),c.$broadcast("timer-set-countdown",t.startTime),t.finished=function(){t.showCountdown=!1,n.broadcast(),o.go("channel",{channel_id:a.channel_id},{reload:!0})},t.startTime<1?t.finished():t.showCountdown=!0}t.$watch("dataReady",function(n){n&&i()})}]);