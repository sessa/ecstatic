angular.module("ecstatic.camera").controller("CameraCtrl",["$scope","cameraEventServices","cameraServices","$ionicHistory","$stateParams","$ionicHistory",function(e,o,n,i,t,i){var l;e.recHold=!1,console.log(e.recHold),e.onDesktop;var c;navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)?(console.log("we are not in browser"),e.onDesktop=!1):(console.log("we are in browser"),e.onDesktop=!0),e.onDesktop||document.getElementById("fileinput").addEventListener("change",function(){c=this.files[0],e.add()},!1),e.add=function(){console.log("going through add function"),n.sendMobileVideo(t.channel_id,c),i.goBack()},e.onRelease=function(){e.recHold=!1,console.log(e.recHold),n.endVideoClip()},e.onHold=function(){e.recHold=!0,console.log(e.recHold),n.startVideoClip()},e.sendVideo=function(){n.getCurrentBlob()?n.sendVideo(t.channel_id):e.video?(console.log("has mobile video"),n.sendVideo(t.channel_id,e.mobileVideo)):console.log("no video"),i.goBack()},e.showCamera=function(){n.cameraStart()},e.deleteClip=function(){l=document.getElementById("videoElement"),l.src="",n.deleteCurrentBlob(),n.cameraStart()},o.listenVideoSource(function(e,o){l=document.getElementById("videoElement"),l.src=o,l.play()}),e.onDesktop&&(console.log("show cam"),e.showCamera())}]);