angular.module("ecstatic.camera").controller("CameraCtrl",["$scope","cameraEventServices","cameraServices","$ionicHistory","$stateParams","$ionicHistory",function(e,o,n,t,i,t){var a;e.recHold=!1,e.onDesktop;var d;navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)?e.onDesktop=!1:e.onDesktop=!0,e.onDesktop||document.getElementById("fileinput").addEventListener("change",function(){d=this.files[0],e.add()},!1),e.add=function(){n.sendMobileVideo(i.channel_id,d),t.goBack()},e.onRelease=function(){e.recHold=!1,n.endVideoClip()},e.onHold=function(){e.recHold=!0,n.startVideoClip()},e.sendVideo=function(){n.getCurrentBlob()?n.sendVideo(i.channel_id):e.video&&n.sendVideo(i.channel_id,e.mobileVideo),t.goBack()},e.showCamera=function(){n.cameraStart()},e.deleteClip=function(){a=document.getElementById("videoElement"),a.src="",n.deleteCurrentBlob(),n.cameraStart()},o.listenVideoSource(function(e,o){a=document.getElementById("videoElement"),a.src=o,a.play()}),e.onDesktop&&e.showCamera()}]);